<%= form_for(@patient, html: { multipart: true }) do |f| %>
	<%= render "shared/error_messages", :target => @patient%>

	<div class="card card-md">
    <div class="card-body">
      <div class="mb-3">
		    <%= f.label :firstname, class: "form-label required" %>
		    <%= f.text_field :firstname, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :lastname, class: "form-label required" %>
        <%= f.text_field :lastname, class: "form-control" %>
      </div>

      <div class="mb-3">
		    <%= f.label :date_of_birth, class: "form-label" %>
        <div class="row">
          <%= f.date_select :date_of_birth, { 
            start_year: Time.now.year - 100, 
            end_year: Time.now.year, 
          }, 
          class: "form-select date-select" %>
        </div>
	    </div>

      <div class="mb-3">
        <%= f.label :uid, class: "form-label" %>
        <%= f.text_field :uid, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :profile_picture, t(:profile_picture), class: "form-label" %>
        <%= f.file_field :profile_picture,
          accept: "image/jpeg,image/png",
          class: "form-control",
          data: {
            profile_picture_input: true,
            max_file_size: ProfileImageable::MAX_FILE_SIZE,
            max_file_size_message: t(
              'errors.messages.profile_picture_too_large',
              limit: number_to_human_size(ProfileImageable::MAX_FILE_SIZE)
            )
          } %>
        <small class="form-hint text-muted"><%= t(:profile_picture_hint) %></small>
        <% if f.object.respond_to?(:profile_picture) && f.object.profile_picture.attached? %>
          <div class="mt-3 d-flex align-items-center gap-3">
            <%= avatar_for(f.object, variant: :small, classes: 'avatar avatar-lg rounded-circle') %>
            <div class="form-check">
              <%= f.check_box :remove_profile_picture, class: "form-check-input" %>
              <%= f.label :remove_profile_picture, t(:remove_profile_picture), class: "form-check-label" %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="hr-text py-3">
        <%= t :contact_information %>
      </div>

      <div class="mb-3">
        <%= f.label :email, class: "form-label" %>
        <%= f.email_field :email, class: "form-control" %>
        <%= content_tag "small", t(:patient_email_hint), class: "text-muted" %>
      </div>

      <div class="mb-3">
        <%= f.label :telephone, class: "form-label" %>
        <%= f.telephone_field :telephone, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :mobile, class: "form-label" %>
        <%= f.telephone_field :mobile, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :emergency_telephone, class: "form-label" %>
        <%= f.telephone_field :emergency_telephone, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :address, class: "form-label" %>
        <%= f.text_area :address, maxlength: 100, rows: 2, class: "form-control" %>
      </div>

      <div class="hr-text py-3">
        <%= t :medical_history %>
      </div>

      <div class="mb-3">
        <%= f.label :allergies, class: "form-label" %>
        <%= f.text_area :allergies, rows: 2, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :past_illnesses, class: "form-label" %>
        <%= f.text_area :past_illnesses, rows: 2, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :surgerie, class: "form-label" %>
        <%= f.text_area :surgeries, rows: 2, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :medications, class: "form-label" %>
        <%= f.text_area :medications, :rows => 4, :class => "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :cigarettes_per_day, class: "form-label" %>
        <%= f.number_field :cigarettes_per_day, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :drinks_per_day, class: "form-label" %>
        <%= f.number_field :drinks_per_day, :class => "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :drugs_use, class: "form-label" %>
		    <%= f.text_area :drugs_use, :rows => 2, :class => "form-control" %>
		    <%= content_tag "small", t(:drugs_use_hint), class: "text-muted" %>
      </div>

      <div class="mb-3">
        <%= f.label :family_diseases, class: "form-label" %>
        <%= f.text_area :family_diseases, :rows => 4, :class => "form-control" %>
        <%= content_tag "small", t(:family_diseases_hint), class: "text-muted" %>
      </div>
    </div>

    <div class="card-footer text-end">
      <div class="d-flex">
        <%= f.submit(t(:save), :class => "btn btn-primary ms-auto", data: { disable_with: t(:please_wait) }) %>
      </div>
    </div>
  </div>
<% end %>