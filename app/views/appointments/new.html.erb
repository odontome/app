<%= form_for(@appointment, :remote => true) do |f| %>
	<p>		
		<%= text_field_tag "appointment[patient_id]", nil, :title => _("Enter the patient name or Unique Identifier") %>
	</p>

	<p>
		<%= f.label _("Doctor") %>
		<%= f.select(:doctor_id, options_from_collection_for_select(@doctors, "id", "fullname"), :title => _("Select a doctor")) %>
	</p>

	<p>
		<%= f.text_area :notes, :placeholder => _("Additional notes"), :rows => 2, :title => _("Additional notes"), :limit => 255  %>
	</p>

	<%= f.hidden_field :starts_at %>

	<%= f.submit(_("Save"), :class => "g-button", :disable_with => _("Please wait...")) %> <%= _("or") %> <a id="close_dialog" href="#">Cancel</a>

<% end %>


<script type="text/javascript">
	$(document).ready(function() {
		// Setup autocomplete for patients
		$("#appointment_patient_id").autoSuggest("/patients.json", {startText: "<%=_('Enter the patient name or Unique Identifier')%>", minChars: 2, selectionLimit: 1, selectedValuesProp: "id", selectedItemProp: "fullname", searchObjProps: "uid,fullname", emptyText: "<%=_('No results, a new patient will be created')%>", asHtmlID: "patient_id"});
		
		// Limit the notes
		$('#appointment_notes').limit('255');
				
		// tipTip all text inputs and textareas
		$('input').tipTip();	
		$('textarea').tipTip();
		
		$('#close_dialog').click(function() {
		  $('#modal_dialog').dialog('close');
		});
	});	
</script>
